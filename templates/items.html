<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='favicon.png') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% if multi_line_mode %}
    <script src="{{ url_for('static', filename='marked.min.js') }}"></script>
    {% endif %}
    <title>Shopping List {{ unprefixed_name }}</title>
  </head>
<body role="document">

  <ul class="nav nav-pills justify-content-center navbar bg-light">
    <li class="nav-item">
      <a class="nav-link" href="{{ base_url_path }}">Lists</a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" href="#">Items</a>
    </li>
  </ul>

    <div class="container" style="margin-top: 12px">
        <h3>List: {{ unprefixed_name }}</h3>
      <div class="bg-light" style="padding: 6px">
        <a href="?">⬇️ Name</a> <a href="?order_by=state">⬇️ Priority</a>
      </div>
      {% if new_item_located_at_top %}
      <div class="bg-light" class="container">
          {% if multi_line_mode %}
          <textarea id="newItemName" placeholder="New item..."></textarea>
          {% else %}
          <input id="newItemName" type="text" placeholder="New item..." />
          {% endif %}
          <button id="addNewItemButton" type="button" class="btn btn-default" {% if multi_line_mode %}style="vertical-align: top;"{% endif %}><strong>+</strong></button>
      </div>
      {% endif %}
      <div id="items-buttons">
        {% for item in items %}
          <button
            type="button"
            class="item btn {{ item[2] }} {% if multi_line_mode %}markdown-content{% endif %}"
            data-state="{{ item[1] }}"
            data-key=""
            data-item-index="{{ loop.index0 }}"
            {% if multi_line_mode %}style="text-align: left;" data-raw="{{ item[0] }}"{% endif %}
          >
            {% if not multi_line_mode %}
              {% if item[0].startswith('http') %}
                <a href="{{ item[0] }}" target="_blank">{{ item[0] | safe }}</a>
              {% else %} {{ item[0] | safe }} {% endif %}
            {% endif %}
          </button>
        {% endfor %}
      </div>
    </div>

    {% if not new_item_located_at_top %}
    <footer class="footer">
      <div class="container">
          {% if multi_line_mode %}
          <textarea id="newItemName" placeholder="New item..."></textarea>
          {% else %}
          <input id="newItemName" type="text" placeholder="New item..." />
          {% endif %}
          <button id="addNewItemButton" type="button" class="btn btn-default" {% if multi_line_mode %}style="vertical-align: top;"{% endif %}><strong>+</strong></button>
      </div>
    </footer>
    {% endif %}

    <script type="text/javascript">
      window.ShoppingList = {
        Config: {
          multilineMode: {{ 'true' if multi_line_mode else 'false' }},
          separator: "{{ separator }}",
          baseUrlPath: "{{ base_url_path }}",
          listName: "{{ list_name }}",
          serverItems: {{ items | tojson }}
        },
        Items: {}
      };
    </script>
    <script src="{{ url_for('static', filename='items.js') }}"></script>
</body>
</html>